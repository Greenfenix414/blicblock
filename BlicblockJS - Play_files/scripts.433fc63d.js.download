(function(){"use strict";angular.module("blicblockApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","LocalStorageModule","angularMoment","swipe"]).config(["$routeProvider","localStorageServiceProvider",function(a,b){var c;return b.setPrefix("blicblockJS"),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",title:"Play"}).when("/test/:color_count",{templateUrl:"views/main.html",controller:"MainCtrl",title:"Test"}).when("/test/cascade/:cascade_count",{templateUrl:"views/main.html",controller:"MainCtrl",title:"Test Cascades"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",title:"About"}).when("/help",{templateUrl:"views/help.html",controller:"AboutCtrl",title:"How to Play"}),c={templateUrl:"views/scores.html",controller:"ScoresCtrl",title:"High Scores"},a.when("/scores",c).when("/scores/country/:country_code",c).when("/scores/initials/:initials",c).when("/scores/time/:time",c).when("/scores/order/:order",c).when("/scores/page/:page",c).when("/scores/country/:country_code/page/:page",c).when("/scores/initials/:initials/page/:page",c).when("/scores/time/:time/page/:page",c).when("/scores/order/:order/page/:page",c).when("/scores/country/:country_code/order/:order",c).when("/scores/country/:country_code/order/:order/page/:page",c).when("/scores/country/:country_code/initials/:initials",c).when("/scores/country/:country_code/initials/:initials/page/:page",c).when("/scores/country/:country_code/initials/:initials/order/:order",c).when("/scores/country/:country_code/initials/:initials/order/:order/page/:page",c).when("/scores/country/:country_code/time/:time",c).when("/scores/country/:country_code/time/:time/page/:page",c).when("/scores/country/:country_code/time/:time/order/:order",c).when("/scores/country/:country_code/time/:time/order/:order/page/:page",c).when("/scores/country/:country_code/initials/:initials/time/:time",c).when("/scores/country/:country_code/initials/:initials/time/:time/page/:page",c).when("/scores/country/:country_code/initials/:initials/time/:time/order/:order",c).when("/scores/country/:country_code/initials/:initials/time/:time/order/:order/page/:page",c).when("/scores/initials/:initials/order/:order",c).when("/scores/initials/:initials/order/:order/page/:page",c).when("/scores/initials/:initials/time/:time",c).when("/scores/initials/:initials/time/:time/page/:page",c).when("/scores/initials/:initials/time/:time/order/:order",c).when("/scores/initials/:initials/time/:time/order/:order/page/:page",c).when("/scores/time/:time/order/:order",c).when("/scores/time/:time/order/:order/page/:page",c),a.otherwise({redirectTo:"/"})}]).filter("reverse",function(){return function(a){return a.slice().reverse()}}).filter("range",function(){return function(a,b){var c,d;for(b=parseInt(b,10),c=d=0;b>=0?b>d:d>b;c=b>=0?++d:--d)a.push(c);return a}}).run(["$location","$rootScope",function(a,b){return b.$on("$routeChangeSuccess",function(a,c){return c.hasOwnProperty("$$route")?(b.collapse.nav=!0,b.title=c.$$route.title):void 0})}])}).call(this),function(){var a;a=function(){function a(a){this.color=a.color,this.x=a.x,this.y=a.y,this.locked="undefined"==typeof a.locked?!1:a.locked,this.active="undefined"==typeof a.active?!0:a.active,this.sliding=!1,this.plummetting=!1,this.highlight=!1,this.id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b,c;return b=16*Math.random()|0,c="x"===a?b:3&b|8,c.toString(16)})}return a}(),("undefined"!=typeof exports&&null!==exports?exports:this).Block=a}.call(this),function(){"use strict";angular.module("blicblockApp").directive("ngLeft",function(){return function(a,b,c){var d;return d=void 0,b.bind("keydown keypress",function(b){return $(b.target).is("input")||!b.which||d&&d.which===b.which?void 0:(d=b,37===b.which||"a"===String.fromCharCode(b.which)?(a.$apply(function(){return a.$eval(c.ngLeft)}),b.preventDefault()):void 0)}),b.bind("keyup",function(){return d=void 0})}})}.call(this),function(){"use strict";angular.module("blicblockApp").directive("ngRight",function(){return function(a,b,c){var d;return d=void 0,b.bind("keydown keypress",function(b){return $(b.target).is("input")||!b.which||d&&d.which===b.which?void 0:(d=b,39===b.which||"d"===String.fromCharCode(b.which)?(a.$apply(function(){return a.$eval(c.ngRight)}),b.preventDefault()):void 0)}),b.bind("keyup",function(){return d=void 0})}})}.call(this),function(){"use strict";angular.module("blicblockApp").directive("ngDown",function(){return function(a,b,c){return b.bind("keydown keypress",function(b){return!$(b.target).is("input")&&b.which&&(40===b.which||"s"===String.fromCharCode(b.which))?(a.$apply(function(){return a.$eval(c.ngDown)}),b.preventDefault()):void 0})}})}.call(this),function(){"use strict";angular.module("blicblockApp").directive("ngSpace",function(){return function(a,b,c){return b.bind("keydown keypress",function(b){return b.which&&32===b.which?(a.$apply(function(){return a.$eval(c.ngSpace)}),b.preventDefault()):void 0})}})}.call(this),function(){"use strict";angular.module("blicblockApp").directive("ngTap",function(){return{link:function(a,b,c){var d;return d=!1,b.bind("touchstart",function(){return b.addClass("active"),d=!0,!0}),b.bind("touchmove",function(){return b.removeClass("active"),d=!1,!0}),b.bind("touchend",function(){return b.removeClass("active"),d&&a.$apply(c.ngTap,b),!0})}}})}.call(this),function(){"use strict";angular.module("blicblockApp").service("Config",function(){var a;return new(a=function(){function a(){this.storage_keys={high_score:"high_score",initials:"initials"}}return a}())})}.call(this),function(){"use strict";angular.module("blicblockApp").service("Tetromino",["$rootScope","$interval","$timeout",function(a,b,c){var d;return new(d=function(){function a(){this.blocks=[],this.upcoming=[],this.colors=["magenta","orange","yellow","green","blue","white"],this.info={cols:5,rows:7,score_value:1e3,checking:!1,in_progress:!0,plummetting_block:!1,sliding_block:!1,game_over:!1,current_score:0,tick_length_decrement_pct:.09,tick_length:1200,level:1,test_mode:!1,submitted_score:!1},this.info.middle_col_idx=(this.info.cols-1)/2}return a.prototype.remove_all_blocks=function(){var a,b;for(a=this.blocks.length-1,b=[];a>=0;)this.blocks.splice(a,1),b.push(a--);return b},a.prototype.add_locked_block=function(a,b,c){return this.blocks.push(new Block({color:a,x:b,y:c,locked:!0,active:!1}))},a.prototype.setup_cascade=function(){return this.info.in_progress=!1,this.remove_all_blocks()},a.prototype.setup_one_cascade=function(){var a,b,c;return this.setup_cascade(),c=this.info.rows-1,a=this.colors[0],b=this.colors[1],this.add_locked_block(a,c,0),this.add_locked_block(a,c,1),this.add_locked_block(a,c,2),this.add_locked_block(b,c-1,0),this.add_locked_block(b,c-1,1),this.add_locked_block(b,c-1,2),this.add_locked_block(a,c-2,0),this.upcoming[0]=new Block({color:b}),this.info.in_progress=!0},a.prototype.setup_two_cascades=function(){var a,b;return this.setup_one_cascade(),a=this.colors[2],b=this.info.rows-1,this.add_locked_block(a,b-4,0),this.add_locked_block(a,b-3,0),this.add_locked_block(a,b-5,0),this.add_locked_block(a,b-2,1)},a.prototype.setup_three_cascades=function(){var a,b;return this.setup_two_cascades(),a=this.colors[3],b=this.info.rows-1,this.add_locked_block(a,b-6,0),this.add_locked_block(a,b-3,1),this.add_locked_block(a,b-4,1),this.add_locked_block(a,b-5,1)},a.prototype.setup_four_cascades=function(){var a,b,c,d;return this.setup_cascade(),d=this.info.rows-1,c=this.info.cols-1,a=this.colors[0],b=this.colors[1],this.add_locked_block(a,d,c),this.add_locked_block(b,d,c-1),this.add_locked_block(b,d,c-2),this.add_locked_block(b,d,c-3),this.add_locked_block(b,d-1,c),this.add_locked_block(a,d-1,c-1),this.add_locked_block(a,d-1,c-2),this.add_locked_block(a,d-1,c-3),this.add_locked_block(a,d-2,c),this.add_locked_block(b,d-2,c-1),this.add_locked_block(b,d-2,c-2),this.add_locked_block(b,d-2,c-3),this.add_locked_block(b,d-3,c),this.add_locked_block(a,d-3,c-1),this.add_locked_block(a,d-3,c-2),this.add_locked_block(a,d-3,c-3),this.add_locked_block(a,d-4,c),this.add_locked_block(b,d-4,c-1),this.add_locked_block(b,d-4,c-2),this.add_locked_block(b,d-4,c-3),this.upcoming[0]=new Block({color:b}),this.info.in_progress=!0},a.prototype.get_active_block=function(){return this.blocks.filter(function(a){return a.active})[0]},a.prototype.get_middle_column_blocks=function(){return this.blocks.filter(function(a){return function(b){return b.y===a.info.middle_col_idx}}(this))},a.prototype.check_for_tetrominos=function(){var a,b,c,d;if(this.info.in_progress&&!this.info.checking){for(this.info.checking=!0,d=this.blocks,b=0,c=d.length;c>b;b++)a=d[b],a&&a.locked&&!a.active&&(this.check_for_straight_tetromino(a),this.check_for_square_tetromino(a),this.check_for_l_tetromino(a),this.check_for_z_tetromino(a),this.check_for_t_tetromino(a));return this.info.checking=!1}},a.prototype.get_closest_block_to_left=function(a,b){var c;return c=this.blocks.filter(function(c){return c.x===a&&c.y<b}),c.sort(function(a,b){return a.y<b.y?-1:a.y>b.y?1:0}),c[c.length-1]},a.prototype.get_closest_block_to_right=function(a,b){var c;return c=this.blocks.filter(function(c){return c.x===a&&c.y>b}),c.sort(function(a,b){return a.y<b.y?-1:a.y>b.y?1:0}),c[0]},a.prototype.get_closest_block_below=function(a,b){var c;return c=this.blocks.filter(function(c){return c.x>a&&c.y===b}),c.sort(function(a,b){return a.x<b.x?-1:a.x>b.x?1:0}),c[0]},a.prototype.is_block_directly_below=function(a,b){return this.blocks.filter(function(c){return c.x===a+1&&c.y===b})[0]},a.prototype.plummet_block=function(a,c,d){var e,f;return a.x===c?void(d&&d()):(f=void 0,e=function(e){return function(){return a.plummetting=!0,e.info.plummetting_block=!0,a.x<c?a.x++:a.x===c&&(b.cancel(f),f=void 0,a.locked=!0,a.active=!1,e.info.plummetting_block=!1,a.plummetting=!1,e.on_block_land(a),d)?d():void 0}}(this),e(),f=b(e,25))},a.prototype.blocks_on_top=function(a){var b,c,d,e,f;return e=function(){var c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(b.x);return e}(),f=function(){var c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(b.y);return e}(),c=Math.max.apply(Math,e),d=this.blocks.filter(function(a){return a.x<c&&f.indexOf(a.y)>-1}),d.sort(function(a,b){return a.x<b.x?1:a.x>b.x?-1:0}),d},a.prototype.highlight=function(a){return a.highlight=!0,c(function(){return a.highlight=!1},.21*this.info.tick_length)},a.prototype.drop_blocks=function(){var a,b,c,d,e,f;if(this.info.in_progress){for(b=this.info.rows-1,e=this.blocks,f=[],c=0,d=e.length;d>c;c++)a=e[c],a&&(a.sliding||((a.active||!a.locked)&&(a.x===b&&(a.locked=!0,a.active=!1,this.on_block_land(a)),this.is_block_directly_below(a.x,a.y)&&(a.locked=!0,a.active=!1,this.on_block_land(a))),a.locked||f.push(a.x++)));return f}},a.prototype.on_block_land=function(a){return this.highlight(a),this.check_for_tetrominos()},a.prototype.increment_level_if_necessary=function(){return this.info.current_score%4e3===0?this.info.level++:void 0},a.prototype.plummet_blocks=function(a,b){var c,d,e;return"undefined"==typeof b&&(b=0),c=a[b],d=this.get_closest_block_below(c.x,c.y),e=d?d.x-1:this.info.rows-1,this.plummet_block(c,e,function(c){return function(){return b<a.length-1?c.plummet_blocks(a,b+1):void 0}}(this))},a.prototype.remove_blocks=function(a){var b,c,d;if(this.info.in_progress){for(b=a.map(function(a){return a.id}),c=this.blocks.length-1;c>=0;)b.indexOf(this.blocks[c].id)>-1&&this.blocks.splice(c,1),c--;return this.info.current_score+=this.info.score_value,this.increment_level_if_necessary(),d=this.blocks_on_top(a),d=d.filter(function(a){return!a.active}),d.length>0&&this.plummet_blocks(d),this.check_for_tetrominos()}},a.prototype.lookup=function(a,b,c){return a>=this.info.rows||b>=this.info.cols?void 0:this.blocks.filter(function(d){return d.x===a&&d.y===b&&d.color===c})[0]},a.prototype.check_for_straight_tetromino=function(a){return this.check_for_straight_hor_tetromino(a),this.check_for_straight_ver_tetromino(a)},a.prototype.check_for_straight_hor_tetromino=function(a){var b,c,d,e,f,g;return g=a.y,f=a.x,e=a.color,b=this.lookup(f,g+1,e),b&&(c=this.lookup(f,g+2,e),c&&(d=this.lookup(f,g+3,e)))?this.remove_blocks([a,b,c,d]):void 0},a.prototype.check_for_straight_ver_tetromino=function(a){var b,c,d,e,f,g;return f=a.x,g=a.y,e=a.color,b=this.lookup(f+1,g,e),b&&(c=this.lookup(f+2,g,e),c&&(d=this.lookup(f+3,g,e)))?this.remove_blocks([a,b,c,d]):void 0},a.prototype.check_for_square_tetromino=function(a){var b,c,d,e,f,g;return f=a.x,g=a.y,e=a.color,b=this.lookup(f,g+1,e),b&&(c=this.lookup(f+1,g,e),c&&(d=this.lookup(f+1,g+1,e)))?this.remove_blocks([a,b,c,d]):void 0},a.prototype.check_for_l_tetromino=function(a){return this.check_for_left_l_tetromino(a),this.check_for_right_l_tetromino(a)},a.prototype.check_for_left_l_tetromino=function(a){var b,c,d,e,f,g;if(f=a.x,g=a.y,e=a.color,b=this.lookup(f+1,g,e)){if(c=this.lookup(f+2,g,e)){if(d=this.lookup(f+2,g-1,e))return this.remove_blocks([a,b,c,d]);if(d=this.lookup(f,g+1,e),!d)return;return this.remove_blocks([a,b,c,d])}if(c=this.lookup(f+1,g+1,e)){if(d=this.lookup(f+1,g+2,e),!d)return;return this.remove_blocks([a,b,c,d])}if((c=this.lookup(f,g-1,e))&&(d=this.lookup(f,g-2,e)))return this.remove_blocks([a,b,c,d])}},a.prototype.check_for_right_l_tetromino=function(a){var b,c,d,e,f,g;if(f=a.x,g=a.y,e=a.color,b=this.lookup(f+1,g,e)){if(c=this.lookup(f+2,g,e)){if(d=this.lookup(f+2,g+1,e))return this.remove_blocks([a,b,c,d]);if(d=this.lookup(f,g-1,e),!d)return;return this.remove_blocks([a,b,c,d])}if(c=this.lookup(f+1,g-1,e)){if(d=this.lookup(f+1,g-2,e),!d)return;return this.remove_blocks([a,b,c,d])}if((c=this.lookup(f,g+1,e))&&(d=this.lookup(f,g+2,e)))return this.remove_blocks([a,b,c,d])}},a.prototype.check_for_z_tetromino=function(a){var b,c,d,e,f,g;if(f=a.x,g=a.y,e=a.color,b=this.lookup(f+1,g,e)){if(c=this.lookup(f,g-1,e)){if(d=this.lookup(f+1,g+1,e),!d)return;return this.remove_blocks([a,b,c,d])}if(c=this.lookup(f,g+1,e)){if(d=this.lookup(f+1,g-1,e),!d)return;return this.remove_blocks([a,b,c,d])}if(c=this.lookup(f+1,g+1,e)){if(d=this.lookup(f+2,g+1,e),!d)return;return this.remove_blocks([a,b,c,d])}if((c=this.lookup(f+1,g-1,e))&&(d=this.lookup(f+2,g-1,e)))return this.remove_blocks([a,b,c,d])}},a.prototype.check_for_t_tetromino=function(a){var b,c,d,e,f,g;if(f=a.x,g=a.y,e=a.color,b=this.lookup(f+1,g,e)){if(c=this.lookup(f+2,g,e)){if(d=this.lookup(f+1,g+1,e))return this.remove_blocks([a,b,c,d]);if(d=this.lookup(f+1,g-1,e),!d)return;return this.remove_blocks([a,b,c,d])}if(c=this.lookup(f+1,g-1,e)){if(d=this.lookup(f+1,g+1,e),!d)return;return this.remove_blocks([a,b,c,d])}if((c=this.lookup(f,g-1,e))&&(d=this.lookup(f,g+1,e)))return this.remove_blocks([a,b,c,d])}},a}())}])}.call(this),function(){"use strict";angular.module("blicblockApp").factory("Country",["$resource",function(a){return a("/api/scores/countries.json",{},{})}])}.call(this),function(){"use strict";angular.module("blicblockApp").factory("Score",["$resource",function(a){return a("/api/scores/:id.json",{},{query:{method:"GET",isArray:!1},update:{method:"PUT"}})}])}.call(this),function(){"use strict";angular.module("blicblockApp").service("Notification",["$timeout",function(a){var b;return new(b=function(){function b(){this.notices=[],this.errors=[]}return b.prototype.wipe_notices=function(){var a,b,c,d,e;for(d=this.notices,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.remove("notice",a.id));return e},b.prototype.wipe_errors=function(){var a,b,c,d,e;for(d=this.errors,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.remove("error",a.id));return e},b.prototype.wipe_notifications=function(){return this.wipe_notices(),this.wipe_errors()},b.prototype.remove=function(a,b){var c,d,e,f,g,h,i;if("error"===a){f=this.errors,h=[];for(d in f)c=f[d],c.id===b&&h.push(this.errors.splice(d,1));return h}g=this.notices,i=[];for(d in g)e=g[d],e.id===b&&i.push(this.notices.splice(d,1));return i},b.prototype.error=function(b){var c;if(b)return console.error(b),c=this.errors.length+1,this.errors.push({message:b,id:c}),a(function(a){return function(){return a.remove("error",c)}}(this),3500)},b.prototype.notice=function(b){var c;if(b)return c=this.notices.length+1,this.notices.push({message:b,id:c}),a(function(a){return function(){return a.remove("notice",c)}}(this),3e3)},b}())}])}.call(this),function(){"use strict";angular.module("blicblockApp").controller("NotificationsCtrl",["$scope","$cookieStore","Notification",function(a,b,c){var d;return a.notices=c.notices,a.errors=c.errors,a.remove=function(a,b){return c.remove(a,b)},d=b.get("error"),d?(c.error(d),b.remove("error")):void 0}])}.call(this),function(){"use strict";angular.module("blicblockApp").controller("MainCtrl",["$scope","$window","$timeout","$interval","$routeParams","$rootScope","localStorageService","Config","Tetromino","Score","Notification",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;if(a.blocks=i.blocks,a.upcoming=i.upcoming,a.game_info=i.info,a.score_record=new j,a.new_high_score={},r=void 0,a.new_game=function(){return a.score_record=new j,b.location.reload()},e.color_count?(n=parseInt(e.color_count,10),n>i.colors.length&&(n=i.colors.length-1),1>n&&(n=1),o=i.colors.slice(0,n)):(o=i.colors,a.game_info.test_mode&&a.new_game()),u=function(){return o[Math.floor(Math.random()*o.length)]},e.cascade_count){switch(m=parseInt(e.cascade_count,10)){case 1:i.setup_one_cascade();break;case 2:i.setup_two_cascades();break;case 3:i.setup_three_cascades();break;default:i.setup_four_cascades()}a.upcoming.push(new Block({color:u()}))}else for(a.game_info.test_mode&&a.new_game();a.upcoming.length<2;)a.upcoming.push(new Block({color:u()}));return a.game_info.test_mode=!!e.color_count||!!e.cascade_count,v=function(){var b;return a.game_info.test_mode?{value:-1e6,date:new Date(1969,0,1)}:(b=g.get(h.storage_keys.high_score),b?b:{})},a.existing_high_score=v(),l=function(){return angular.isDefined(r)?(d.cancel(r),r=void 0):void 0},x=function(){var b,c;if(!a.game_info.test_mode)return c=g.get(h.storage_keys.high_score),b=a.game_info.current_score,a.score_record.value=b,a.score_record.initials=g.get(h.storage_keys.initials),c&&c.value<b||!c?(c={value:b,date:new Date},g.set(h.storage_keys.high_score,c),a.new_high_score.value=c.value):void 0},a.record_high_score=function(){var b,c;if(!a.game_info.test_mode)return c=function(b){return k.notice("You are #"+b.rank+" out of "+(""+b.total_scores+" scores!")),a.game_info.submitted_score=!0,g.set(h.storage_keys.initials,b.initials)},b=function(a){return k.error("Failed to record your score: "+a.data.error)},a.score_record.$save(c,b)},t=function(){return a.game_info.in_progress=!1,a.game_info.game_over=!0,l(),x()},w=function(){return a.upcoming[1]=new Block({color:u()})},p=function(){var b,c,d,e,f;if(!a.game_info.checking){if(c=i.get_middle_column_blocks(),c.length<a.game_info.rows){if(e=0,f=a.game_info.middle_col_idx,d=a.blocks.filter(function(a){return a.x===e&&a.y===f})[0])return;return b=a.upcoming[0],b.x=e,b.y=f,a.upcoming[0]=a.upcoming[1],w(),a.blocks.push(b)}return t()}},q=function(){var a;return(a=i.get_active_block())?void 0:p()},s=function(){return!a.game_info.in_progress||a.game_info.plummetting_block||a.game_info.sliding_block?void 0:(i.drop_blocks(),q())},y=function(){return angular.isDefined(r)?void 0:r=d(s,a.game_info.tick_length)},a.$on("pause",function(){return a.game_info.plummetting_block?void 0:(a.game_info.in_progress=!1,l())}),a.$on("resume",function(){return a.game_info.game_over?void 0:(a.game_info.in_progress=!0,y())}),a.$on("toggle_pause",function(){return a.$emit(a.game_info.in_progress?"pause":"resume")}),z=function(b){return b.sliding=!1,a.game_info.sliding_block=!1},a.$on("move_left",function(){var b,d;if(a.game_info.in_progress&&(b=i.get_active_block(),b&&!b.plummetting&&!b.sliding&&0!==b.y))return b.sliding=!0,a.game_info.sliding_block=!0,d=i.get_closest_block_to_left(b.x,b.y),d&&d.y===b.y-1?void z(b):(b.y--,c(function(){return z(b)},100))}),a.$on("move_right",function(){var b,d;if(a.game_info.in_progress&&(b=i.get_active_block(),b&&!b.plummetting&&!b.sliding&&b.y!==a.game_info.cols-1))return b.sliding=!0,a.game_info.sliding_block=!0,d=i.get_closest_block_to_right(b.x,b.y),d&&d.y===b.y+1?void z(b):(b.y++,c(function(){return z(b)},100))}),a.$on("move_down",function(){var b,c,d;if(a.game_info.in_progress&&(b=i.get_active_block(),b&&!b.plummetting&&!b.sliding&&b.x!==a.game_info.rows-1))return c=i.get_closest_block_below(b.x,b.y),d=c?c.x-1:a.game_info.rows-1,i.plummet_block(b,d,function(){return l(),q(),y()})}),a.$watch("game_info.level",function(){return a.game_info.level>1&&(a.game_info.tick_length-=a.game_info.tick_length*a.game_info.tick_length_decrement_pct,l()),y()}),a.$on("$locationChangeStart",function(){return a.$emit("pause")}),f.$watch("collapse.nav",function(){return f.collapse.nav?void 0:a.$emit("pause")}),a.capitalize_initials=function(){return a.score_record.initials?a.score_record.initials=a.score_record.initials.toUpperCase():void 0}}])}.call(this),function(){"use strict";angular.module("blicblockApp").controller("AboutCtrl",function(){})}.call(this),function(){"use strict";angular.module("blicblockApp").controller("ScoresCtrl",["$scope","$location","$routeParams","Score","Country",function(a,b,c,d,e){var f,g,h,i;return a.countries=e.query(),i="week",g="",f="",h="value",a.filters={time:c.time||i,initials:c.initials||g,order:c.order||h,country_code:c.country_code||f,page:c.page||1},a.score_results=d.query(a.filters),a.filter=function(){var c,d;return d="/scores",c=a.filters.country_code,c&&c!==f&&(d+="/country/"+c),a.filters.initials!==g&&(d+="/initials/"+a.filters.initials),a.filters.time!==i&&(d+="/time/"+a.filters.time),a.filters.order!==h&&(d+="/order/"+a.filters.order),1!==a.filters.page&&(d+="/page/"+a.filters.page),b.path(d)},a.change_page=function(){return a.filters.page=a.score_results.page,a.filter()}}])}.call(this);